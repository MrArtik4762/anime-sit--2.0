# Anime Site 2.0 🎬

Современный аниме-стриминговый сайт с полным циклом разработки (фронтенд + бэкенд), построенный на современных технологиях. Приложение предлагает пользователям богатый функционал для просмотра аниме, взаимодействия с контентом и общения с другими пользователями.

## ✨ О проекте

Anime Site 2.0 - это полнофункциональная платформа для просмотра аниме с продвинутыми возможностями, включая систему профилей, комментарии, администрирование, социальные функции и геймификацию. Приложение поддерживает PWA возможности и оптимизировано для работы на различных устройствах.

### 🌟 Новые возможности

- **👤 Профиль пользователя** с аватаром, настройками и приватностью
- **💬 Система комментариев** с live-обновлениями через Socket.io
- **🛡️ Админ-панель** с управлением пользователями и контентом
- **🎨 Улучшенный дизайн** с анимациями и hover-эффектами на Framer Motion
- **🔔 Система уведомлений** с toast сообщениями через react-hot-toast
- **🔍 Instant search** с автодополнением на Algolia
- **👥 Социальные фичи** (друзья, лайки, активность пользователей)
- **🎮 Геймификация** (уровни, достижения, опыт)
- **🌙 Плавная смена тем** (light/dark/system)
- **📱 PWA поддержка** для офлайн доступа
- **⚡ Real-time обновления** через WebSocket
- **🎯 Адаптивный дизайн** с Tailwind CSS

## 🧩 Требования

### Frontend
- **Node.js** 18+ (для разработки)
- **npm** или **yarn**
- Современный браузер с поддержкой ES2020

### Backend
- **Node.js** 18+
- **MongoDB** 4.4+
- **Git** (для управления версиями)

### Опционально
- **nodemon** (для автоматической перезагрузки сервера в разработке)

## 🚀 Быстрый старт

### 1. Клонирование репозитория

```bash
git clone https://github.com/your-username/anime-site-2.0.git
cd anime-site-2.0
```

### 2. Установка зависимостей

```bash
# Установка зависимостей для фронтенда
npm install

# Установка зависимостей для бэкенда
cd backend
npm install
cd ..
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
# Frontend
VITE_API_URL=http://localhost:5000
VITE_FRONTEND_URL=http://localhost:5173

# Backend
PORT=5000
NODE_ENV=development
MONGODB_URI=mongodb://localhost:27017/anime-site
JWT_SECRET=your-super-secret-jwt-key
FRONTEND_URL=http://localhost:5173
ANILIBRIA_API_URL=https://anilibria.top/api/v1
```

Создайте файл `.env` в папке `backend`:

```env
PORT=5000
NODE_ENV=development
MONGODB_URI=mongodb://localhost:27017/anime-site
JWT_SECRET=your-super-secret-jwt-key
FRONTEND_URL=http://localhost:5173
```

### 4. Запуск MongoDB

Убедитесь, что MongoDB запущен:

```bash
# Для Windows (через MongoDB Compass или как сервис)
mongod

# Для Linux/macOS
sudo systemctl start mongod
```

### 5. Запуск бэкенда

```bash
cd backend
npm run dev
```

Бэкенд будет доступен по адресу: `http://localhost:5000`

### 6. Запуск фронтенда

```bash
npm run dev
```

Фронтенд будет доступен по адресу: `http://localhost:5173`

## 🏗️ Архитектура

### Структура проекта

```
anime-site-2.0/
├── frontend/                 # Фронтенд (React + TypeScript)
│   ├── src/
│   │   ├── components/      # Reusable компоненты
│   │   ├── pages/          # Страницы приложения
│   │   ├── hooks/          # Custom hooks
│   │   ├── services/       # API сервисы
│   │   ├── stores/         # Zustand stores
│   │   ├── types/          # TypeScript типы
│   │   └── utils/          # Утилиты
│   ├── public/             # Статические файлы
│   └── package.json
├── backend/                # Бэкенд (Node.js + Express)
│   ├── server.js           # Основной сервер
│   ├── uploads/            # Загруженные файлы
│   └── package.json
└── README.md
```

### Технологический стек

**Frontend:**
- **React 18** - UI библиотека
- **TypeScript** - Статическая типизация
- **Vite** - Build tool и dev server
- **Tailwind CSS** - Utility-first CSS framework
- **Framer Motion** - Анимации
- **React Router** - Routing
- **Zustand** - State management
- **React Query** - Server state
- **Socket.io Client** - Real-time communication
- **Axios** - HTTP клиент

**Backend:**
- **Node.js** - Runtime environment
- **Express** - Web framework
- **MongoDB** - NoSQL база данных
- **Mongoose** - ODM для MongoDB
- **JWT** - Аутентификация
- **Socket.io** - Real-time communication
- **Multer** - Загрузка файлов
- **bcryptjs** - Хеширование паролей

### Схема взаимодействия

```
┌─────────────────┐    HTTP/Socket    ┌─────────────────┐
│   Frontend      │ ◄──────────────►  │    Backend      │
│   (React)       │                    │   (Express)     │
│                 │                    │                 │
│ ┌─────────────┐ │                    │ ┌─────────────┐ │
│ │ Components  │ │                    │ │   Routes    │ │
│ │   & Pages   │ │                    │ │   & Logic   │ │
│ └─────────────┘ │                    │ └─────────────┘ │
│                 │                    │                 │
│ ┌─────────────┐ │                    │ ┌─────────────┐ │
│ │   State     │ │                    │ │   MongoDB   │ │
│ │  (Zustand)  │ │                    │ │ (Mongoose)  │ │
│ └─────────────┘ │                    │ └─────────────┘ │
└─────────────────┘                    └─────────────────┘
```

## 🎨 Дизайн и темы

### Цветовая схема
- **Primary**: #8B5CF6 (Violet)
- **Secondary**: #06B6D4 (Cyan)
- **Background**: #1F2937 (Dark gray)
- **Text**: #F9FAFB (Light gray)

### Темы оформления
Приложение поддерживает три темы:
- **Light** - Светлая тема
- **Dark** - Темная тема  
- **System** - Автоматическая смена темы в зависимости от системы

### Анимации
- **Страницы**: Плавные переходы между страницами
- **Компоненты**: Hover-эффекты и микро-анимации
- **Интерфейс**: Интерактивные элементы с обратной связью

### Градиентные фоны
- Фоновые градиенты для создания глубины
- Адаптивные градиенты для разных тем
- Оптимизированная производительность

## 🔐 Аутентификация

### JWT токены
- Используются JSON Web Tokens для аутентификации
- Срок действия токена: 7 дней
- Автоматическое обновление при каждом входе

### HttpOnly Cookies
- Токены хранятся в httpOnly cookies для безопасности
- Защита от XSS атак
- Secure флаг в продакшене

### Система ролей
- **User** - Обычный пользователь
- **Admin** - Администратор с полным доступом

### Функции безопасности
- Хеширование паролей с bcryptjs
- Валидация входных данных
- Защита от CSRF атак
- Rate limiting на API endpoints

## 📊 Админ-панель

### Управление пользователями
- Просмотр списка пользователей
- Поиск пользователей по имени/email
- Изменение ролей (user/admin)
- Удаление пользователей и их данных

### Управление контентом
- Модерация комментариев
- Поиск и управление аниме
- Статистика по контенту

### Статистика и аналитика
- Общая статистика платформы
- Активность пользователей
- Популярный контент
- Графики и диаграммы (Recharts)

### Функции модерации
- Удаление неуместного контента
- Блокировка пользователей
- Автоматическая фильтрация спама

## 🎮 Геймификация

### Система уровней
- Опыт за активность (комментарии, лайки)
- Повышение уровня с накоплением опыта
- Визуальные индикаторы прогресса

### Достижения
- Различные типы достижений
- Условия получения достижений
- Визуальные награды и значки

### Прогресс пользователя
- Отслеживание активности
- Статистика достижений
- Рейтинги и лидерборды

### Социальные механики
- Друзья и подписки
- Лайки и репосты
- Активность в ленте

## 🚢 Деплой

### Frontend деплой
```bash
# Сборка продакшен версии
npm run build

# Deploy на Vercel
npm i -g vercel
vercel --prod

# Deploy на Netlify
npm run build
npx netlify deploy --prod
```

### Backend деплой
```bash
# Сборка и запуск
npm start

# Использование PM2 для продакшена
npm install -g pm2
pm2 start server.js --name "anime-site-backend"
pm2 save
pm2 startup
```

### MongoDB в продакшене
- Использование MongoDB Atlas (облачный сервис)
- Настройка переменных окружения:
```env
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/anime-site
```

### PWA деплой
- Генерация PWA файлов
- Настройка service worker
- Оптимизация кэширования

## 🛠️ Разработка

### Структура кода
- **Компоненты**: Функциональные компоненты с TypeScript
- **Хуки**: Custom hooks для повторного использования логики
- **Сервисы**: API интеграции и бизнес-логика
- **Типы**: Определения TypeScript типов

### Guidelines по коду
- Использование ESLint + Prettier
- Строгая типизация в TypeScript
- Компонентная архитектура
- Тестирование (Jest + React Testing Library)

### Process contributions
1. Форк репозитория
2. Создание ветки: `git checkout -b feature/AmazingFeature`
3. Коммит изменений: `git commit -m 'Add some AmazingFeature'`
4. Пуш ветки: `git push origin feature/AmazingFeature`
5. Создание Pull Request

### Доступные скрипты
```bash
# Фронтенд
npm run dev     # Запуск dev сервера
npm run build   # Сборка продакшен версии
npm run preview # Предпросборка
npm run lint    # Проверка кода

# Бэкенд
npm run dev     # Запуск с nodemon
npm start       # Запуск в продакшене
```

## 🗺️ Roadmap

### ✅ Реализовано
- [x] Базовая функциональность просмотра аниме
- [x] Регистрация и аутентификация пользователей
- [x] Профили пользователей с аватарами
- [x] Система комментариев с live-обновлениями
- [x] Избранное и "Смотреть позже"
- [x] Админ-панель для управления пользователями
- [x] Instant search с автодополнением
- [x] Система уведомлений
- [x] Плавная смена тем
- [x] Геймификация (уровни, достижения)
- [x] PWA поддержка
- [x] Оптимизация производительности

### 🚧 В разработке
- [ ] Мобильное приложение
- [ ] Расширенная фильтрация контента
- [ ] Плейлисты и коллекции
- [ ] Расширенная аналитика
- [ ] API для сторонних разработчиков

### 📋 Планируется
- [ ] Поддержка субтитров и озвучек
- [ ] Социальные функции (друзья, группы)
- [ ] Рекомендательная система
- [ ] Монетизация и подписки
- [ ] Мультиязычность
- [ ] Расширенная PWA функциональность

## 📄 Лицензия

Этот проект лицензирован под лицензией MIT - см файл [LICENSE](LICENSE) для деталей.

## 🤝 Вклад

Вклады приветствуются! Не стесняйтесь создавать pull request или открывать issue для улучшения проекта.

## 📞 Контакты

Ваше имя - [@yourusername](https://github.com/yourusername)

---

**Made with ❤️ для аниме-сообщества**